# Python 基础语法

## 缩进与注释

### 缩进

在Python 中 一个缩进等于四个空格，他是Python 语言中表明程序框架的唯一手段。

缩进的空白数量是可变的，但是所有代码块语句必须包含相同的缩进空白数量，这个必须严格执行。

### Python 引导

Python 可以使用引号( ’ )、双引号( " )、三引号( ‘’’ 或 “”" ) 来表示字符串，引号的开始与结束必须是相同类型的。其中三引号可以由多行组成，编写多行文本的快捷语法，常用于文档字符串，在文件的特定地点，被当做注释。

### 注释

注释是用于说明代码信息的，注释代码是不执行的。Python注释主要包括两种：

- 行注释：采用#开头进行单行注释，如“#定义一个变量”。

  行注释用#

- 块注释：多行说明的注释采用’’'或"""开头和结尾，比如使用Python集成开发环境Spyder新建文件时，通常有一段注释说明。

  块注释用三引号

  """

  注释内容

  """

### 多行语句

Python语句中一般以新行作为语句的结束符。但是我们可以使用斜杠（ \）将一行的语句分为多行显示，如下所示：

```
total = item_one + \
        item_two + \
        item_three
123
```

语句中包含 [], {} 或 () 括号就不需要使用多行连接符。如下实例：

```
days = ['Monday', 'Tuesday', 'Wednesday',
        'Thursday', 'Friday']
12
```

## 变量与常量

### 变量

变量是程序中值可以发生改变的元素，是内存中命名的存储位置，变量代表或引用某值的名字，比如希望用N代表3，name代表“hello”等。其命名规则如下：

- 变量名是由大小写字符、数字和下划线（_）组合而成的。

- 变量名的第一个字符必须是字母或下划线（_）。

- Python中的变量是区分大小写的，比如“TEST”和“test”是两个变量。

- 在Python中对变量进行赋值时，使用单引号和双引号是一样的效果。
  注意，Python中已经被使用的一些关键词不能用于声明变量，关键词表如下：

  ```
  ['and', 'as', 'assert', 'break', 'class', 'continue', 'def',
   'del', 'elif',  'else', 'except', 'exec', 'finally', 'for', 'from', 
   'global', 'if', 'import', 'in',  'is', 'lambda',  'not', 'or', 
   'pass', 'print', 'raise', 'return', 'try', 'while', 'with', 'yield']
  1234
  ```

  

  不同于C/C++/Java等语言，Python中的变量不需要声明，就可以直接使用赋值运算符对其进行赋值操作，根据所赋的值来决定其数据类型

### 常量

常量是指程序中值不发生改变的元素，一旦初始化后就不能对其修改的固定值，它是内存中用来保存固定值的单元。由于某种原因，Python并未提供如C/C++/Java一样的const修饰符，换言之，python并没有定义常量的关键字。但是Python可以使用对象的方法来创建常量，比如通过const.py文件，将const类注册到sys.modules全局字典中

## 输入与输出

### 输出

输出使用print()函数实现，包括输出字符信息或变量，print(a)

如果需要输出多个变量，则使用采用逗号连接，如print(a,b,c)。

简单示例如下图所示，print()函数可以输出各种类型的变量。

同时，Python支持格式化输出数据，需要调用format() 函数实现，其输出格式为：

print(format(val,format_modifier))

```
>>>print(format(12.3456,'6.2f')) #表示输出6位数值的浮点数，精确到小数点后两位，最后一位四舍五入
12.35
>>>print(format(0.3456,'0.2f'))#输出整数直接用'.0f'
0.35
```

### 输入

Python输入主要包括`input()`和`raw_input()`两个函数。

### input()

input()函数从控制台获取用户输入的值，格式为：<变量>=input(<提示性文字>)。获取的输入结果为用户输入的字符串或值，并保存在变量中。输入字符串和整数实例如下，其中type()函数用于查找变量的类型。

```
>>> str1 = input("input:")
input:"I am a teacher"
>>> print(str1)
I am a teacher

>>> age = input("input:")
input:25
>>> print(age,type(age))
25 <class 'str'>
>>> 
```

### raw_input()

raw_input()函数是另一个输入操作，并返回string字符串。输入以换行符结束，通过help(raw_input)可以查找帮助，常见格式为：s = raw_input([prompt])，参数[prompt]可选，用于提示用户输入。示例代码如下，第一段代码输入“hello world”，第二段代码输入“25”。

```
>>> str1 = raw_input("input:")
input:hello world
>>> print(str1)
hello world

>>> age = raw_input("input:")
input:25
>>> print(age,type(age))
25 <type 'str'>
>>> 
```

注意：在Python3 中，用input()代替raw_input();

## 赋值与表达式

### 赋值

Python中的赋值语句是使用等号（=）给变量直接赋值，如“a=10”。如果需要同时给多个变量进行赋值，表达式如下：

- <变量1>,<变量2>,…,<变量n> = <表达式1>,<表达式2>,…,<表达式n>

- 它先运算右侧N个表达式，然后同时将表达式结果赋给左侧变量。举例如下：

  ```
  >>> a,b,c = 10,20,(10+20)/2
  >>> print(a,b,c)
  10 20 15.0
  >>>
  ```

### 表达式

表达式是程序中产生或计算新数据值的一行代码，赋值表达式如a=10，通常由变量、常量或操作符号产生表达式。定义表达式注意一下几点：

- 使用变量之前必须对其赋值，使用赋值表达式对其赋值。
- 表达式也需要遵循句首缩进规律，且不能改变其空格数量。
- 表达式中可以适量增加空格，使程序可读性更高，但空格不能分割变量的命名方式，比如“a = b + c”，在运算符之间适当增加空格。

# 数据类型

常见的Python 数据类型有

## 数字类型

Python常见的数字类型包括整数类型、浮点数类型、复数类型。

- **整数类型**：对应的数学中的整数，其返回类型为int型，如10、25等；long为长整型，也可以代表八进制和十六进制。
- **浮点数类型**：带有小数点的数字，返回类型为float型，如3.14、2.1e2等。
- **复数类型**：Python复数分为两部分，形如a + bj，其中a为实部，b为虚部，返回类型为complex，例如-12.3 + 8j。复数可以通过.real获取实部数据，.imag获取虚部数据。

```
>>> z = -12.3 + 8j
>>> print(z, type(z))
(-12.3+8j) <type 'complex'>
>>> print(z.real, z.imag)
-12.3 8.0
```

注意：Python中数字类型是可以相互转换的，其中浮点数调用int()函数转换为整数，如int(3.14)返回结果3，整数调用float()转换为小数，浮点数调用complex()函数转换为复数。

## 字符串类型

字符串类型在Python中是指需要用单引号或双引号括起来的一个字符或字符串。该类型调用type(‘Python’)返回的结果是str类型。一般记为：

- s=“a1a2···an”(n>=0)

字符串表示一个字符的序列，其最左端表示字符串的起始位置，下标为0，然后依次递增。字符串对应的编号称为“索引”，比如str1=‘Python’，则str1[0]获取第一个字符，即“P”字母，并且字符串提供了一些操作和函数共用户使用，比如len(str1)计算字符串长度，其返回结果为6。

```
counter = 100         #赋值整型变量
miles = 1000.0        #浮点型
name = "Eastmount"    #字符串
```

python的字串列表有两种取值顺序：

- 从左到右索引默认0开始的，最大范围是字符串长度少1

- 从右到左索引默认-1开始的，最大范围是字符串开头

  如果你要实现从字符串中获取一段子字符串的话，可以使用 **[头下标:尾下标]** 来截取相应的字符串，其中下标是从0开始算起，可以是正数或负数，下标可以为空表示取到头或尾。**[头下标:尾下标]** 获取的子字符串包含头下标的字符，但不包含尾下标的字符。比如:

  ```
  >>> s = 'abcdef'
  >>> s[1:5]
  'bcde'
  ```

  ## 列表类型

  列表是Python中非常重要的一个数据类型，它是在中括号（[ ]）中用逗号分隔的元素集合，列表中的元素可以通过索引进行单个访问，并且每个元素之间是有序的。例如：

  ```
  >>> list1 = [1, 2, 3, 4, 5]
  >>> print(list1)
  [1, 2, 3, 4, 5]
  >>> print(list1[0])
  1
  >>> print(type(list1))
  <type 'list'>
  
  >>> list2 = ['I', 'am', 'a', 'teacher']
  >>> print(list2)
  ['I', 'am', 'a', 'teacher']
  >>> print(list2[3])
  teacher
  >>> 
  ```

  列表可以完成大多数集合类的数据结构实现。它支持字符、数字、字符串甚至可以包含列表（即嵌套）。列表用 [ ] 标识，是Python最通用的复合数据类型。

  列表中值的切割也可以用到变量 **[头下标:尾下标]** ，就可以截取相应的列表，从左到右索引默认0开始，从右到左索引默认-1开始，下标可以为空表示取到头或尾。



列表中的每个元素可以定义不同的数据类型，如list1 = [1, 1.3, ‘teacher’]。其操作方法和字符串类似，如列表采用加号（+）拼接、采用乘号（*）重复显示、也可以切片获取列表中的子元素，示例如下：

```
>>> list1 = [1, 2, 3, 4, 5]
>>> list2 = [6, 7, 8]
>>> print(list1+list2)
[1, 2, 3, 4, 5, 6, 7, 8]
>>> print(list2*3)
[6, 7, 8, 6, 7, 8, 6, 7, 8]
>>> print(list1[2:4])
[3, 4]
>>>
```

## 元组类型

元组是和列表类似的一种数据类型，它采用小括号定义一个或多个元素的集合，其返回类型为tuple。示例如下：

```
>>> t1 = (12, 34, 'Python')
>>> print(t1)
(12, 34, 'Python')
>>> print(type(t1))
<type 'tuple'>
>>> print(t1[2])
Python
>>> 
```

注意：可以定义空的元组，如t2=()，元组可以通过索引访问，比如上述代码t1[2]访问第3个元素，即“Python”。当元组定义后就不能进行更改，也不能删除，这不同于列表，由于元组的不可变特性，它的代码更加安全。

以下是元组无效的，因为元组是不允许更新的，而列表是允许更新的。

```
tuple = ( 'runoob', 786 , 2.23, 'john', 70.2 )
list = [ 'runoob', 786 , 2.23, 'john', 70.2 ]
tuple[2] = 1000    # 元组中是非法应用
list[2] = 1000     # 列表中是合法应用
```

## 字典类型

字典(dictionary)是除列表以外python之中最灵活的内置数据结构类型。列表是有序的对象集合，字典是无序的对象集合。两者之间的区别在于：字典当中的元素是通过键来存取的，而不是通过偏移存取。

字典是针对非序列集合而提供的，字典用"{ }"标识，由键值对（< Key > < Value >）组成，字典是键值对的集合，其类型为dict。键是字典的索引，一个键对应着一个值，通过键值可查找字典中的信息，这个过程叫做映射。

```
>>> dic = {"1":"Beijing","2":"Shanghai","3":"Chengdu","4":"Guiyang"}
>>> print(dic)
{'1': 'Beijing', '3': 'Chengdu', '2': 'Shanghai', '4': 'Guiyang'}
>>> print(dic["4"])
Guiyang
```

字典与列表主要存在几个区别：

- 列表中的元素是顺序排列的，字典中的数据是无序排列的。
- 它们的映射方式不同，列表通过地址映射到值，字典通过键值对映射到值。
- 列表只能通过数字下标或索引访问，字典可以用各种对象类型作为键访问。



字典键值对灵活应用非常重要，尤其是网络爬虫Json格式解析。下面给出一段简单代码，重点是keys()和values()用法。

```
dict = {}
dict['one'] = "This is one"
dict[2] = "This is two"

tinydict = {'name': 'runoob','code':6734, 'dept': 'sales'}
 
print(dict['one']) #输出键为one的值
print(dict[2])     #输出键为2的值
print(tinydict)    #输出完整字典
print(tinydict.keys())   #输出所有键
print(tinydict.values()) #输出所
```

# 字符串操作

字符串是指有序的字符序列集合，用单引号、双引号、三重（单双均可）引号引起来，其中使用三重引号括起来的字符串变量可以用来定义换行的字符串。比如：

```
str1 = 'hello world'
str2 = "hello world"
str3 = """hello world"""
```

字符串支持格式化输出，需要引入操作符百分号（%）实现，在百分号的左侧放置一个格式化字符串，右侧放置期望的格式化值，也可是元组和字典。例如：

```
>>> print("Hi!My Name is %s,I am %d years old and %f pounds heavy."%("YXZ", 26, 55.5))
Hi!My Name is YXZ,I am 26 years old and 55.500000 pounds heavy.
>>> 
```

依次输出字符串（%s）、整数（%d）、浮点数（%s）三个值。同时字符串支持各种各样的操作，尤其是处理文本内容时，需要使用这些方法及函数，下面讲解常用函数。

## 基础操作

字符串的基本操作包括求长度、拼接、重复操作、索引、切片等等。假设str1字符串为“hello”，str2字符串为“world”，则len(str1)计算字符串str1长度为5；str1+str2拼接后的结果为“helloworld”；str1*3字符串重复结果为“hellohellohello”。

字符串切片定义为s[i:j:step],其中step 表示切片的方向，默认起点从0开始，终点不写切到最后。

```python
str1 = 'abcdefghijklmn'
print(str1[3:6])
# def
```

输出结果为“def”，从第3个值开始获取，第6个值为终点且不获取，即str1[0]=‘a’，str1[3]=‘d’，str1[4]=‘e’，str1[5]=‘f’。同样，如果增加step参数且为负数，表示从反向切片。正方向第一个a索引下标值为0，最后一个n索引下标值为-1，结果为“nmlk”。

```
str1 = 'abcdefghijklmn'
print(str1[-1:-5:-1])
# nmlk
```

### find()函数

- 用法：从字符串中查找子字符串，返回值为子串所在位置的最左端索引。如果没有找到则返回-1，扩展的rfind()方法表示从右往左方向查找，常用于正则表达式爬取数据。
- 示例：获取字符串“def”的位置，位于第3个位置（从0开始计数）。

```
str1 = 'abcdefghijklmn'
num = str1.find('def')
print num
# 3
```

### split()函数

- 用法：字符串分割函数，将字符串分割成序列，返回分割后的字符串序列。如果不提供分割符，程序将会把所有空格作为分隔符。
- 示例：默认按照空格分割字符串，也可以设置如“+”分割字符串，该方法在字符串分割、IP提取、URL后缀提取常用。

```
>>>str1 = "I am a teacher"
>>>li = str1.split()
>>>print li
['I','am','a','teacher']
>>>str2 = "1+2+3+4"
>>>print str2.split("+")
['1','2','3','4']
```

### strip()函数

- 用法：该函数用于去除开头和结尾的空格字符（不包含字符串内部的空格），同时S.strip([chars])可去除指定字符。扩展的函数lstrip()去除字符串开始（最左边）的所有空格，rstrip()去除字符串尾部（最右边）的所有空格。

- 示例：去除字符串前后两端的空格。

```
>>> str1 = "    I am a teacher    "
>>> print(str1.strip())
I am a teacher
>>> 
```

### join()函数

- 用法：通过某个字符拼接序列中的字符串元素，队列中元素必须是字符串，返回一个拼接好的字符串函数，可以认为join()函数是split()函数的逆方法。

- 示例：采用空格（’ '）拼接字符串[‘I’,‘am’,‘a’,‘teacher’]，代码及输出结果如下。

  ```
  >>> num = ['I','am','a','teacher']
  >>> sep = ' '
  >>> str1 = sep.join(num)
  >>> print str1
  I am a teacher
  >>> 
  ```

  